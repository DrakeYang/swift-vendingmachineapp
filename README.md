# 자판기 앱 step 1.

### 자판기 프로그램에서 완성된 부분 설명
-

#### 1. 자판기 안에는 음료창고가, 음료창고 안에는 음료슬롯이 여러개, 음료슬롯 안에는 음료가 여러개 들어있다.
#### 2. 관리자 모드에서 재고가 있는 음료의 추가,제거가 가능
#### 3. 사용자 모드에서 재고가 있는 음료의 주문, 잔액 추가가 가능

- 자판기 에 존재하는 객체들

1. 음료
2. 음료슬롯
3. 음료창고
4. 자판기
5. 음료정보
6. 재고정보
7. 주문정보
8. 체커

~~9. 인풋뷰~~
~~10. 아웃풋뷰~~

- 자판기에 존재하는 나열형

1. 음료타입
2. 메인메뉴
3. 사용자메뉴
4. 관리자메뉴
5. 에러

-

#### 음료 객체

- 변수 : 가격, 이름, 음료타입 등등

- 함수

1. 가격비교 : 음료개수,잔액 을 입력받아서 음료가격*임료개수 <= 잔액 인지 참거짓 리턴. 음료구입시 잔액계산에 사용
2. 자기복제 : 자기자신의 변수를 복제하여 새로운 음료객체 리턴. 음료 추가때 사용됨
3. 재고확인 : 음료타입,음료개수를 받아서 해당 타임의 음료가 음료개수만큼 있는지 참거짓 리턴

-

#### 음료슬롯

- 변수 : 음료의 배열
- 함수 : 음료정보 객체 리턴 - 가지고있는 음료의 이름,가격,타입,개수

-

#### 음료창고

- 변수 : 음료슬롯의 배열

- 함수 : 재고정보 객체 리턴 - 가지고있는 음료슬롯들의 정보(음료정보들)

-

#### 자판기 

- 변수 : 음료창고, 잔액, 주문창고(주문받은 음료가 모이는 음료창고 객체)

- 함수 : 음료주문(음료이동 : 음료창고 -> 주문창고, 잔액추가, 잔액소모

-

#### 시나리오 진행

- 모드선택 : 관리자모드,사용자모드,종료

- 관리자모드 : 음료추가, 음료제거, 메인메뉴로 이동
- 사용자모드 : 잔액추가, 음료주문, 메인메뉴로 이동

##### 시나리오는 앱 개발시 변경될수 있음

-

# 자판기 앱 step 2.

- 스텝2 작동화면 

![](VendingmachineApp_step2_20180920.gif)

- 자판기 앱 화면 구성
- 재고개수 IBOutletCollection 으로 묶어서 갱신
- 음료사진 테두리 둥글게 적용
- 재고추가,잔액추가 기능 연결
- 예외처리 부분 alert 으로 변경

-

# 자판기 앱 step 3.

![](VendingmachineApp_step3_running.gif)

- 앱 생명주기 학슴 - AppDelegate
- Encoding,Decoding 학습
- UserDefault 사용

-

# 자판기 앱 step 4.

- 자판기 객체 singleton pattern 적용

-

# 자판기 앱 step 5.

- 화면상에 나타나는 변화는 없음
- Notification 을 Observer 패턴으로 적용
- 음료추가 함수에 직접 연결되어 있던 재고체크 함수를 제거
- 음료 추가시 noti 를 보냄
- 음료추가 noti 를 체크하는 Observer 추가
- 음료추가 noti 가 오면 재고체크 함수를 실행
- 싱글톤 객체를 직접 부르지 않고 의존성 주입을 이용해서 사용

-

# 자판기 앱 step 6.
![](VendingmachineApp_step6_20181131.gif)

- 구매목록을 이미지로 추가
- 구매할때마다 notification 에 연결되어 추가됨
- UIImageView 로 구현

-

# 자판기 앱 step 7.
![](VendingmachineApp_step7_20181201.gif)

- 기존 화면에서 관리자 모드 버튼 추가 : 관리자 화면과 연결
- 관리자 화면 추가 : 이전 화면의 모든 기능 추가
- 기존 화면에서 구매버튼 제거

-

# 자판기 앱 step 8.
![](VendingmachineApp_step8_20181214.gif)

- 관리자 화면에서 주문한음료 내역을 원그래프로 표현
- 원그래프 표현 부분은 viewWillAppear 에 생성
- UIBezierPath 를 이용하여 원, 파이 그리기
- 각도와 길이를 받아서 좌표설정
- 좌표에 글자 출력
- 위의 내용을 실시간으로 구현


-

# 자판기 앱 step 9.
![](VendingmachineApp_step9_20181220.gif)

### 요구사항 : 
- PieGraphView 클래스에 다음의 터치 이벤트를 처리하는 핸들러 메서드를 추가한다.
- 그래프에 손을 터치하면 (떨어지지않은 상태) 그래프를 지우고 검정색 동그라미 그래프만 그린다.
- 그래프에 손을 떨어지지 않은 상태에서 손을 움직일때,
- 터치한 점부터 원점에 가까워지면 파이 그래프 크기를 줄이고,
터치한 점부터 원점에서 멀어지면 파이 그래프 크기를 늘린다.
- 그래프에 손을 떨어지면 구매이력 그래프 색상을 바꿔서 바뀐 크기대로 다시 그린다.
- 제한된 최대/최소 크기를 지정하고 그 이상 커지거나 작아지지 않도록 한다.
- 관리자 화면 ViewController에서 Shake 이벤트를 받으면 원래 크기대로 복구한다.



### 적용사항 
- NSPanGestureRecognizer 를 사용해서 드래그 이벤트 구현
- Model <> viewContoroller <> view 간의 관계 유지 
- Model 데이터를 view 로 직접 건네주지 않고 인터페이스를 이용
